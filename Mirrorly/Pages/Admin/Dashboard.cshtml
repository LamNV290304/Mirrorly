@page "/Admin/Dashboard"
@model Mirrorly.Pages.Admin.DashboardModel
@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Pages/Admin/_AdminLayout.cshtml";
}

<div class="stats-grid">
    <div class="stat-card users">
        <div class="stat-header">
            <div class="stat-title">Tổng Users</div>
            <div class="stat-icon" style="color: #3b82f6;">👥</div>
        </div>
        <div class="stat-number">@Model.TotalUsers</div>
        <div class="stat-change positive">+@Model.NewUsersThisMonth mới trong tháng</div>
    </div>

    <div class="stat-card muas">
        <div class="stat-header">
            <div class="stat-title">MUA</div>
            <div class="stat-icon" style="color: #f472b6;">💄</div>
        </div>
        <div class="stat-number">@Model.TotalMuas</div>
        <div class="stat-change positive">@Model.VerifiedMuas đã xác minh</div>
    </div>

    <div class="stat-card bookings">
        <div class="stat-header">
            <div class="stat-title">Bookings</div>
            <div class="stat-icon" style="color: #10b981;">📅</div>
        </div>
        <div class="stat-number">@Model.TotalBookings</div>
        <div class="stat-change positive">@Model.BookingsThisMonth booking tháng này</div>
    </div>

    <div class="stat-card revenue">
        <div class="stat-header">
            <div class="stat-title">Doanh thu (VNĐ)</div>
            <div class="stat-icon" style="color: #f59e0b;">💰</div>
        </div>
        <div class="stat-number">@Model.TotalRevenue.ToString("N0")</div>
        <div class="stat-change positive">@Model.RevenueThisMonth.ToString("N0") VNĐ tháng này</div>
    </div>
</div>

<!-- Recent Activities -->
<div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px; margin-top: 30px;">
    <!-- Recent Users -->
    <div>
        <h3 style="color: #1e293b; margin-bottom: 20px;">👥 Users mới nhất</h3>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Tên</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Ngày tạo</th>
                    <th>Trạng thái</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var user in Model.RecentUsers)
                {
                    <tr>
                        <td>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div class="admin-avatar" style="width: 30px; height: 30px; font-size: 12px;">
                                    @user.Username.Substring(0, 1).ToUpper()
                                </div>
                                @user.FullName
                            </div>
                        </td>
                        <td>@user.Email</td>
                        <td>
                            <span class="status-badge @(user.RoleId == 2 ? "status-verified" : user.RoleId == 3 ? "status-pending" : "")">
                                @(user.RoleId == 1 ? "Customer" : user.RoleId == 2 ? "MUA" : "Admin")
                            </span>
                        </td>
                        <td>@DateTime.Now.AddDays(-new Random().Next(1, 30)).ToString("dd/MM/yyyy")</td>
                        <td>
                            <span class="status-badge @(user.IsActive ? "status-active" : "status-inactive")">
                                @(user.IsActive ? "Active" : "Inactive")
                            </span>
                        </td>
                        <td>
                            <a href="/Admin/Users/Details/@user.UserId" class="btn btn-primary btn-sm">Xem</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Quick Stats -->
    <div>
        <h3 style="color: #1e293b; margin-bottom: 20px;">📊 Thống kê nhanh</h3>
        <div style="display: flex; flex-direction: column; gap: 15px;">
            <div style="background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b;">
                <div style="color: #92400e; font-size: 12px; font-weight: 600;">ĐANG CHỜ XÁC MINH</div>
                <div style="font-size: 24px; font-weight: 700; color: #1e293b;">@Model.PendingVerifications</div>
            </div>
            <div style="background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #ef4444;">
                <div style="color: #991b1b; font-size: 12px; font-weight: 600;">BÁO CÁO CẦN XỬ LÝ</div>
                <div style="font-size: 24px; font-weight: 700; color: #1e293b;">@Model.PendingReports</div>
            </div>
            <div style="background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                <div style="color: #166534; font-size: 12px; font-weight: 600;">BOOKING HÔM NAY</div>
                <div style="font-size: 24px; font-weight: 700; color: #1e293b;">@Model.BookingsToday</div>
            </div>
        </div>

        <div style="margin-top: 30px;">
            <h4 style="color: #1e293b; margin-bottom: 15px;">🚀 Hành động nhanh</h4>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <a href="/Admin/Verifications" class="btn btn-warning btn-sm">Xem xác minh chờ duyệt</a>
                <a href="/Admin/Users" class="btn btn-primary btn-sm">Quản lý tất cả users</a>
                <a href="/Admin/Bookings" class="btn btn-success btn-sm">Xem bookings mới</a>
                <a href="/Admin/Reports" class="btn btn-danger btn-sm">Xử lý báo cáo</a>
            </div>
        </div>
    </div>
</div>